let currentSlideIndex = 0; 
let totalSlides = document.querySelectorAll('.company-banner-slide').length;
let auto = true;
let stopMouseHover = true;
let delay = 5; // Задержка автопрокрутки установлена в 5 секунд
let autoInterval;
let loop = true; // Зацикливание слайдов
let navs = true; // Показать навигационные стрелки
let pags = true; // Показать пагинацию

document.addEventListener("DOMContentLoaded", function() {
    showSlide(currentSlideIndex);
    updatePagination();
    if (auto) startAutoSlide();
    if (!navs) {
        document.querySelector('.prev').style.display = 'none';
        document.querySelector('.next').style.display = 'none';
    }
    if (!pags) {
        document.querySelector('.pagination').style.display = 'none';
    }
});

function showSlide(index) {
    const slides = document.querySelectorAll('.company-banner-slide');
    const slideWidth = slides[0].clientWidth;
    const slideContainer = document.querySelector('.company-banner-slides');

    if (index >= totalSlides) {
        currentSlideIndex = loop ? 0 : totalSlides - 1;
    } else if (index < 0) {
        currentSlideIndex = loop ? totalSlides - 1 : 0;
    } else {
        currentSlideIndex = index;
    }

    slideContainer.style.transform = `translateX(-${currentSlideIndex * slideWidth}px)`;
    updateSlideIndicator();
    updatePagination(); 
}

function changeSlide(n) {
    showSlide(currentSlideIndex + n);
}

function updatePagination() {
    const paginationContainer = document.querySelector('.pagination');
    paginationContainer.innerHTML = '';

    for (let i = 0; i < totalSlides; i++) {
        const pageButton = document.createElement('span');
        pageButton.classList.add('pagination-button');
        if (i === currentSlideIndex) pageButton.classList.add('active');
        pageButton.onclick = () => showSlide(i);
        paginationContainer.appendChild(pageButton);
    }
}

function updateSlideIndicator() {
    const indicator = document.querySelector('.slide-indicator');
    indicator.innerText = `${currentSlideIndex + 1} / ${totalSlides}`;
}

function startAutoSlide() {
    if (autoInterval) clearInterval(autoInterval);
    autoInterval = setInterval(() => {
        changeSlide(1);
    }, delay * 1000); // Используем заданную в коде задержку
}

if (stopMouseHover) {
    const slideshowContainer = document.querySelector('.company-banner-slideshow');
    slideshowContainer.addEventListener('mouseenter', () => {
        clearInterval(autoInterval);
    });
    slideshowContainer.addEventListener('mouseleave', () => {
        startAutoSlide();
    });
}
